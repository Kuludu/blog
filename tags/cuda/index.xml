<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Cuda on Kuluduçš„åšå®¢</title>
        <link>https://blog.kuludu.net/tags/cuda/</link>
        <description>Recent content in Cuda on Kuluduçš„åšå®¢</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Kuludu</copyright>
        <lastBuildDate>Mon, 22 Mar 2021 21:42:00 +0800</lastBuildDate><atom:link href="https://blog.kuludu.net/tags/cuda/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>â€œè§£å†³â€CUDNN_STATUS_ALLOC_FAILED</title>
        <link>https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/</link>
        <pubDate>Mon, 22 Mar 2021 21:42:00 +0800</pubDate>
        
        <guid>https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/</guid>
        <description>&lt;p&gt;æœ€è¿‘æ­£åœ¨åšä¸€ä¸ª&lt;del&gt;ç‚¼ä¸¹&lt;/del&gt;æ·±åº¦å­¦ä¹ çš„é¡¹ç›®ï¼Œä¸å¯é¿å…åœ°ä½¿ç”¨åˆ°äº†GPUåŠ é€Ÿã€‚å…¶ä¸­ï¼Œåœ¨ä½¿ç”¨cuDNNçš„æ—¶å€™é‡åˆ°äº†CUDNN_STATUS_ALLOC_FAILEDçš„é—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç»™å‡ºæˆ‘çš„ç³»ç»Ÿç¡¬ä»¶ä»¥åŠè½¯ä»¶ç¯å¢ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OS: Windows Server 2019 Standard&lt;/li&gt;
&lt;li&gt;CPU: Intel Xeon W-2123 3.6GHz&lt;/li&gt;
&lt;li&gt;Memory: 64G ECC&lt;/li&gt;
&lt;li&gt;GPU: NVIDIA Quadro P4000(8G)&lt;/li&gt;
&lt;li&gt;Tensorflow: 1.13.2&lt;/li&gt;
&lt;li&gt;Keras: 2.1.5&lt;/li&gt;
&lt;li&gt;CUDA: 10.0&lt;/li&gt;
&lt;li&gt;cuDNN: 7.3&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…·ä½“æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2021-03-22 20:39:27.884555: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILED
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2021-03-22 20:39:27.888005: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILED
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Traceback (most recent call last):
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  File &amp;#34;C:\ProgramData\Anaconda3\envs\ly\lib\site-packages\tensorflow\python\client\session.py&amp;#34;, line 1334, in _do_call
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    return fn(*args)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  File &amp;#34;C:\ProgramData\Anaconda3\envs\ly\lib\site-packages\tensorflow\python\client\session.py&amp;#34;, line 1319, in _run_fn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    options, feed_dict, fetch_list, target_list, run_metadata)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  File &amp;#34;C:\ProgramData\Anaconda3\envs\ly\lib\site-packages\tensorflow\python\client\session.py&amp;#34;, line 1407, in _call_tf_sessionrun
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    run_metadata)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tensorflow.python.framework.errors_impl.UnknownError: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         [[{{node conv2d_1/convolution}}]]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         [[{{node concat_9}}]]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;quick-fix&#34;&gt;Quick Fix
&lt;/h2&gt;&lt;p&gt;æ­¤å¤„å‚è€ƒstackoverflowä¸Šçš„&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/59116872/could-not-create-cudnn-handle-cudnn-status-alloc-failed-on-a-project-that-sho&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä¸€ä¸ªæ–¹æ¡ˆ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;environ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;CUDA_VISIBLE_DEVICES&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç›´æ¥ç¦ç”¨GPUï¼Œè‡ªç„¶ä¹Ÿå°±ä¸ä¼šç‰µæ‰¯åˆ°cuDNNã€‚&lt;/p&gt;
&lt;p&gt;Problem solved, amazing!&lt;/p&gt;
&lt;p&gt;ä¸ªé¬¼ã€‚&lt;/p&gt;
&lt;p&gt;ç¦ç”¨GPUä¹Ÿå°±æ„å‘³ç€ç¦ç”¨äº†GPUåŠ é€Ÿï¼Œ&lt;del&gt;æ„å‘³ç€å¯æ€œçš„CPUè¦burn itself&lt;/del&gt;ï¼Œè¿™åœ¨å¯¹äºæ•ˆç‡æœ‰è¦æ±‚çš„ç”Ÿäº§ç¯å¢ƒæ˜¯ä¸è¡Œçš„ğŸ™…â€â™‚ï¸ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§‚å¯Ÿ&#34;&gt;è§‚å¯Ÿ
&lt;/h2&gt;&lt;p&gt;åœ¨å»ºç«‹æ¨¡å‹åæ˜¾å­˜ç›´æ¥çˆ†ç‚¸ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/1744973825.png&#34;
	width=&#34;389&#34;
	height=&#34;90&#34;
	srcset=&#34;https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/1744973825_huc951c505509e7ad07818f190c5e68c85_12239_480x0_resize_box_3.png 480w, https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/1744973825_huc951c505509e7ad07818f190c5e68c85_12239_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;AF436168-5387-4556-979B-721BE57A7A39.png&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;432&#34;
		data-flex-basis=&#34;1037px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥é˜…èµ„æ–™ï¼Œåˆæ­¥çŒœæµ‹æ˜¯æ˜¾å­˜ä¸è¶³å¯¼è‡´çš„ï¼Œæ‰€ä»¥æƒ³åˆ°äº†é™åˆ¶ä¸€ä¸‹æ˜¾å­˜çš„æ¶ˆè€—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tensorflow&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;keras.backend.tensorflow_backend&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set_session&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConfigProto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_options&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allow_growth&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;set_session&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Session&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é™åˆ¶åæ˜¾å­˜æ˜æ˜¾é™ä½äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/2334776544.png&#34;
	width=&#34;407&#34;
	height=&#34;84&#34;
	srcset=&#34;https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/2334776544_hu5bf2df1394971ca98b6aaf13baf2c921_11851_480x0_resize_box_3.png 480w, https://blog.kuludu.net/article/%E8%A7%A3%E5%86%B3-cudnn_status_alloc_failed/2334776544_hu5bf2df1394971ca98b6aaf13baf2c921_11851_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;AF436168-5387-4556-979B-721BE57A7A39.png&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;484&#34;
		data-flex-basis=&#34;1162px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å´©æºƒçš„é—®é¢˜ä¾æ—§ğŸ˜“ã€‚&lt;/p&gt;
&lt;p&gt;åˆæƒ³åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæœåŠ¡å™¨æ˜¯å¤šä¸ªé¡¹ç›®ç»„å…±ç”¨çš„ï¼Œ&lt;strong&gt;æ˜¯ä¸æ˜¯æœ‰å¯èƒ½ä¸ºå…¶å®ƒç»„æ­£åœ¨ä½¿ç”¨å¯¼è‡´cuDNNæ— æ³•åˆ›å»ºå¥æŸ„å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ‰å¯èƒ½ï¼Œä½†æ˜¯æˆ‘ä¹Ÿä¸èƒ½å»å…³åˆ«äººçš„ç¨‹åºå‘€&lt;del&gt;bossä¸å¾—æ‰“æ­»æˆ‘&lt;/del&gt;ğŸ˜…ã€‚&lt;/p&gt;
&lt;p&gt;ç–‘é—®ç•™åœ¨è¿™é‡Œï¼Œç­‰æœåŠ¡å™¨ç©ºäº†å°±æ¥è¡¥å……ã€‚ï¼ˆ&lt;del&gt;å½“ç„¶å¯èƒ½æˆ‘ä¹Ÿå‹æ ¹ä¸ä¼šå¡«å‘&lt;/del&gt;ï¼Œä¸å¦‚ç•™ç»™è¯»è€…å½“ä¸€ä¸ªæ€è·¯ï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;reference&#34;&gt;Reference
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/tensorflow/tensorflow/issues/39989&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/tensorflow/tensorflow/issues/39989&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/qq_40635998/article/details/87297634&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://blog.csdn.net/qq_40635998/article/details/87297634&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
